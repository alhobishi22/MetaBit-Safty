# MetaBit Safety Telegram Bot

## نظرة عامة
هذا البوت مصمم للتحكم في الوصول إلى تطبيق MetaBit Safety المصغر (Mini App). يتطلب من المستخدمين إدخال كود تسجيل صالح (يتم إنشاؤه بواسطة المشرف) قبل السماح لهم بالوصول إلى التطبيق المصغر.

## الميزات
- التحقق من كود التسجيل قبل السماح بالوصول
- واجهة إدارية لإنشاء وإدارة أكواد التسجيل
- تتبع المستخدمين المسجلين
- تصدير بيانات الأكواد والمستخدمين

## متطلبات التشغيل
- Python 3.8+
- python-telegram-bot 20.7+
- قاعدة بيانات SQLite (يتم إنشاؤها تلقائياً)
- رمز وصول (token) لبوت تيليجرام

## خطوات الإعداد

### 1. إنشاء بوت تيليجرام
1. افتح تطبيق تيليجرام وابحث عن [@BotFather](https://t.me/BotFather)
2. أرسل الأمر `/newbot` وأكمل الخطوات لإنشاء بوت جديد
3. احفظ رمز الوصول (token) الذي سيتم إعطاؤه لك (مثال: `123456789:ABCdefGhIJKlmNoPQRsTUVwxyZ`)

### 2. تكوين البوت
هناك طريقتان لتكوين رمز الوصول للبوت:

#### الطريقة الأولى: استخدام متغير بيئي
```
# في نظام Windows
set TELEGRAM_BOT_TOKEN=your_bot_token_here

# في نظام Linux/macOS
export TELEGRAM_BOT_TOKEN=your_bot_token_here
```

#### الطريقة الثانية: تعديل ملف البوت مباشرة
افتح ملف `telegram_bot.py` وقم بتعديل السطر التالي:
```python
application = Application.builder().token(os.environ.get("TELEGRAM_BOT_TOKEN", "YOUR_BOT_TOKEN_HERE")).build()
```
استبدل `YOUR_BOT_TOKEN_HERE` برمز الوصول الخاص بك.

### 3. تثبيت المتطلبات
```
pip install -r requirements.txt
```

### 4. تشغيل البوت
```
python run_telegram_bot.py
```

## استخدام البوت

### للمشرفين
1. قم بتسجيل الدخول إلى لوحة تحكم المشرف في تطبيق الويب
2. انتقل إلى صفحة "أكواد تسجيل تيليجرام"
3. قم بإنشاء أكواد تسجيل جديدة
4. شارك هذه الأكواد مع المستخدمين المصرح لهم

### للمستخدمين
1. افتح البوت على تيليجرام
2. اضغط على زر "ابدأ" أو أرسل الأمر `/start`
3. أدخل كود التسجيل الذي حصلت عليه من المشرف
4. بعد التحقق من الكود، سيظهر زر لفتح التطبيق المصغر

## ملاحظات هامة
- يجب أن يكون البوت قيد التشغيل دائماً للسماح للمستخدمين بالوصول إلى التطبيق المصغر
- يمكن تشغيل البوت على خادم منفصل عن تطبيق الويب
- تأكد من الحفاظ على سرية رمز الوصول الخاص بالبوت
